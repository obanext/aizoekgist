<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nexi Cat Chat</title>
    <link rel="stylesheet" href="/static/css/styles.css" />
</head>
<body>
    <div id="app-container">

        <!-- Mobile action bar (top-right on mobile) -->
        <div id="mobile-actions">
            <!-- Back button: only visible on mobile when a panel is open -->
            <button class="icon-btn" id="back-chat-btn" aria-label="Back to chat" onclick="closeAnyPanel()" style="display:none;">
                <img src="/static/images/loep.svg" alt="Back" class="button-icon" />
            </button>
            <!-- Results button -->
            <button class="icon-btn" id="open-results-btn" aria-label="Results" onclick="openResultPanel()" disabled>
                <img src="/static/images/results.svg" alt="Results" class="button-icon" />
                <span id="results-badge" class="badge" style="display:none;"></span>
            </button>
            <!-- Filter button -->
            <button class="icon-btn" id="open-filters-btn" aria-label="Filters" onclick="openFilterPanel()" disabled>
                <img src="/static/images/filter.svg" alt="Filters" class="button-icon" />
            </button>
        </div>

        <!-- Chat section (always visible) -->
        <div id="chat-section">
            <!-- Mobile logo (top-left on mobile only) -->
            <img id="mobile-logo" src="/static/images/nexthybride.png" alt="Nexi logo">
            
            <!-- Desktop header with new chat/help buttons -->
            <div id="chat-header">
                <button id="new-chat-button" onclick="startNewChat()">
                    <img src="/static/images/new-chat.svg" alt="New Chat" class="button-icon" />
                    new question
                </button>
                <button id="help-button" onclick="startHelpThread()">help!</button>
            </div>

            <!-- Chat messages -->
            <div id="messages"></div>

            <!-- User input + send button -->
            <div id="input-container">
                <input type="text" id="user-input" placeholder="Tell me what you are looking for!" oninput="checkInput()" />
                <button id="send-button" onclick="sendMessage()" disabled>
                    <img src="/static/images/loep.svg" alt="Search" class="button-icon" />
                </button>
            </div>
        </div>

        <!-- Results panel (slides in on mobile, side column on desktop) -->
        <div id="result-section" aria-hidden="true" aria-modal="true" role="dialog">
            <h2 id="breadcrumbs">results</h2>
            <div id="search-results">
                <div><img src="/static/images/placeholder.png" alt="Placeholder"></div>
                <div><img src="/static/images/placeholder.png" alt="Placeholder"></div>
                <div><img src="/static/images/placeholder.png" alt="Placeholder"></div>
                <div><img src="/static/images/placeholder.png" alt="Placeholder"></div>
            </div>
            <div id="detail-container"></div>
        </div>

        <!-- Filters panel (slides in on mobile, side column on desktop) -->
        <div id="filter-section" aria-hidden="true" aria-modal="true" role="dialog">
            <h2>filters</h2>
            <div id="filters">
                <div id="filter-options">
                    <!-- Example filter checkboxes -->
                    <label><input type="checkbox" value="prentenboeken baby"> prentenboeken baby</label>
                    <label><input type="checkbox" value="prentenboeken tot 4 jaar"> prentenboeken tot 4 jaar</label>
                    <label><input type="checkbox" value="prentenboeken vanaf 4 jaar"> prentenboeken vanaf 4 jaar</label>
                    <br>
                    <label><input type="checkbox" value="fictie tot 9 jaar"> A tot 9 jaar</label>
                    <label><input type="checkbox" value="fictie 9 tot 12 jaar"> B 9 tot 12 jaar</label>
                    <label><input type="checkbox" value="fictie vanaf 12 jaar"> C vanaf 12 jaar</label>
                    <label><input type="checkbox" value="fictie vanaf 15 jaar"> D vanaf 15 jaar</label>
                    <label><input type="checkbox" value="fictie volwassenen"> fictie volwassenen</label>
                    <br>
                    <label><input type="checkbox" value="info tot 9 jaar"> info tot 9 jaar</label>
                    <label><input type="checkbox" value="info vanaf 9 jaar"> info vanaf 9 jaar</label>
                    <label><input type="checkbox" value="info volwassenen"> info volwassenen</label>
                </div>
                <button id="apply-filters-button" onclick="applyFiltersAndSend()">apply filters</button>
            </div>
            <!-- Desktop logo bottom-right -->
            <img src="/static/images/nexi-logo.png" alt="Nexi Logo" id="nexi-logo" />
        </div>
    </div>

    <!-- Overlay (used on mobile when a panel is open) -->
    <div id="panel-overlay" onclick="closeAnyPanel()"></div>

    <script src="/static/js/script.js"></script>
</body>
</html>
